<div class="area-ext" [ngClass]="{ 'area-ext-dark': mainService.getDarkTheme() }">
    <div class="area-ext-img" style="background-image: url('assets/images/background5.jpg');"></div>
    <fz-card class="area-ext-center animated fadeIn">
        <div class="card-auth-title">
            Sign <strong>in</strong>
        </div>
        <form [formGroup]="loginForm" (ngSubmit)="loginWithUsernamePassword()">
            <div class="form-group">
                <input formControlName="email" name="email" id="email" type="email" fzFocus [focusState]="true" class="form-control" placeholder="Email Address">
            </div>
            <div class="form-group">
                <input formControlName="password" name="email" id="password" type="password" class="form-control" placeholder="Password">
            </div>
            <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="remember-me">
                <label class="custom-control-label" for="remember-me">Remember me</label>
            </div>
            <div class="d-flex flex-column mt-4">
                <button [disabled]="!loginForm.valid" fzButton [blockB]="true" color="primary" type="submit">
                    Sign In
                </button>
            </div>
            <div class="d-flex flex-column">
                <div class="d-flex justify-content-center mt-4 mb-2">
                    <small>Or sign in with:</small>
                </div>
                <div class="d-flex justify-content-center auth-btns-area">
                    <button class="mr-2" fzButton (click)="showEmailSigninModal()" type="button">
                        <i class="mr-2 fas fa-envelope"></i> Email
                    </button>
<!--                        <button class="mr-2" fzButton>-->
<!--                            <img id="icon-svg-auth" src="assets/svg/facebook.svg" alt="Facebook logo"> Facebook-->
<!--                        </button>-->
                    <button class="mr-2" fzButton type="button" (click)="loginWithGooglePopup()">
                        <img id="icon-svg-auth" src="assets/svg/google.svg" alt="Google logo"> Google
                    </button>
                </div>
            </div>
        </form>
        <div class="area-ext-footer justify-content-between">
            <a routerLink="/recover-password" href="javascript:void(0);">Forgot password?</a>
            <a routerLink="/signup" href="javascript:void(0);"><strong>Sign up</strong></a>
        </div>
    </fz-card>
    <!--  email sign in form, if a user follows a sign in link from their email, then they have to provide their email address as verification -->
    <fz-modal  headerTitle="Send email sign in link" footerPosition="end" #emailSigninModal size="md" centered="true">
        <ng-container content>
            <form [formGroup]="emailSigninForm" (ngSubmit)="sendSigninEmail();emailSigninModal.hide()">
                <div class="form-group">
                    <label for="name">Email Address</label>
                    <input formControlName="email" type="email" class="form-control {{email?.invalid && (email?.dirty || email?.touched) && 'is-invalid'}}" id="name" placeholder="someone@somewhere.com">
                    <small *ngIf="email?.errors?.required && (email?.dirty || email?.touched)" class="text-danger">
                        Required
                    </small>
                    <small *ngIf="!email?.errors?.required && email?.errors?.pattern && (email?.dirty || email?.touched)" class="text-danger">
                        Must be a valid email address
                    </small>
                </div>
                <div class="mt-5 align-content-right">
                    <button [disabled]="!emailSigninForm.valid" class="mr-2" fzButton color="primary" type="submit">
                        Send sign in link to email
                    </button>
                </div>
            </form>
        </ng-container>
    </fz-modal>

    <!-- success modal -->
    <fz-modal headerTitle="Success" [centered]="true" backgroundContainer="success" footerPosition="end" #emailSigninSuccessModal>
        <ng-container content>
            <p>A sign in link has been emailed to you. Follow the link to sign in.</p>
        </ng-container>
        <ng-container footer>
            <button fzButton color="light" (click)="emailSigninSuccessModal.hide()">Close</button>
        </ng-container>
    </fz-modal>

    <fz-modal headerTitle="Error" [centered]="true" backgroundContainer="danger" footerPosition="end" #emailSigninErrorModal>
        <ng-container content>
            <p>There was an error emailing you a sign in link. Please refresh the page and try again.</p>
        </ng-container>
        <ng-container footer>
            <button fzButton color="light" (click)="emailSigninErrorModal.hide()">Close</button>
        </ng-container>
    </fz-modal>
</div>
