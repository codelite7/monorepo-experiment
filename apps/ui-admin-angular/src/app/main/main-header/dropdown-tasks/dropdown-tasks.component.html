<fz-dropdown-header [state]="state" classBt="header-item mr-2" (stateOn)="state = $event">

    <fz-icon-counter button color="warning" [dot]="true" icon="fas fa-tasks" [animatedBalloonInfinite]="true"
                     animatedBalloon="heartBeat">
    </fz-icon-counter>

    <!-- header -->
    <ng-container header>
        <h5>Tasks</h5>
        <a class="ml-auto" href="javascript:void(0);" routerLink="tasks" [queryParams]="{ new: 'true'}"
           (click)="state = false">New task</a>
    </ng-container>

    <!-- content -->
    <ng-container content *ngFor="let item of tasks">
        <a routerLink="tasks" (click)="state = false" class="mh-dropdown-item">
            <span class="mh-dropdown-item-text">

                <span class="mh-dropdown-item-title">
                    <h6>{{ item.title }}</h6>
                    <span class="ml-auto" *ngIf="item.expiryDate && item.delayedTask" fzTip
                          content="This task is late.">
                        <i class="text-danger fas fa-exclamation-circle"></i>
                    </span>
                </span>

                <fz-progress>
                    <span fzProgressItem [colorPI]="tasksService.calcColor(item.completed, item.subtasks)"
                          [sizePI]="tasksService.calcPorc(item.completed, item.subtasks)">
                        {{ tasksService.calcPorc(item.completed, item.subtasks) }} %</span>
                </fz-progress>

                <span class="d-flex mt-1">
                    <small>
                        {{ item.subtasks }} of {{ item.completed }} completed
                    </small>
                    <small fzTip content="Deadline for the delivery of this task." class="ml-auto"
                           *ngIf="item.expiryDate">
                        <i class="far fa-calendar-alt"></i> {{ item.expiryDate }}
                    </small>
                </span>

            </span>
        </a>
    </ng-container>

    <!-- footer -->
    <a href="javascript:void(0);" routerLink="tasks" (click)="state = false" footer>
        See all tasks
        <i class="fas fa-angle-right"></i>
    </a>

</fz-dropdown-header>
