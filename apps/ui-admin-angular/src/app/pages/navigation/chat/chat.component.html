<div class="content">
    <fz-breadcrumb>
        <fz-breadcrumb-item>
            <a href="javascript:void(0);" routerLink="/dashboard">Home</a>
        </fz-breadcrumb-item>
        <fz-breadcrumb-item [active]="true">
            <strong>Chat</strong>
        </fz-breadcrumb-item>
    </fz-breadcrumb>

    <div class="title-content justify-content-between">
        <div class="d-flex">
            <fz-icon-color-circle class="mr-2" color="primary" icon="fas fa-user">
            </fz-icon-color-circle>
            Chat
        </div>
    </div>

    <div [ngClass]="{ 'chat-dark': mainService.getDarkTheme() }" class="row {{ mainService.noGuttersClass(980) }}">
        <!-- list messages-->
        <div class="col-md-12 col-lg-4 col-xl-3 mb-3">
            <fz-card [paddingBody]="false">
                <div #chatLat class="chat-area-lat">
                    <div class="chat-area-lat-area">
                        <!-- search-->
                        <div class="chat-area-lat-search">
                            <input [(ngModel)]="searchList" class="form-control" placeholder="Search..." type="text"/>
                            <div class="icon-search">
                                <a href="javascript:void(0);">
                                    <i class="fas fa-search"></i>
                                </a>
                            </div>
                        </div>

                        <fz-scrollbar>
                            <div [ngStyle]="{'height.px': calcHeightChatLat(chatArea)}">
                                <!-- not found searc-->
                                <small *ngIf="(listChats | fzFilter: searchList).length == 0" class="py-3 px-3 d-flex">
                                    No results found for
                                    <strong>
                                        "{{ searchList }}"
                                    </strong>
                                </small>

                                <!-- item -->
                                <div (click)="openChat(item)" [ngClass]="{'active': item.active}"
                                     *ngFor="let item of listChats | fzFilter: searchList" class="chat-area-lat-item"
                                     tabindex="0">
                                    <div class="chat-area-lat-item-img-tx">
                                        <div class="chat-area-lat-item-img">
                                            <fz-user-image [widthHeight]="40" src="assets/images/{{ item.img }}"
                                                           state="available">
                                            </fz-user-image>
                                        </div>
                                        <div class="chat-area-lat-item-text">
                                            <div class="chat-area-lat-item-name">
                                                {{ item.name }}
                                            </div>
                                            <div class="chat-area-lat-item-msg">
                                                {{ item.msg }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="chat-area-lat-item-dt-tt">
                                        <small class="chat-area-lat-item-date">
                                            {{ item.date }}
                                        </small>
                                        <div *ngIf="item.total" class="chat-area-lat-item-total">
                                            <fz-badge [pill]="true" color="danger">
                                                {{ item.total }}
                                            </fz-badge>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fz-scrollbar>
                        <!--scrollbar itens -->
                    </div>
                </div>
            </fz-card>
        </div>
        <!-- / list messages-->

        <!-- chat -->
        <div class="col-md-12 col-lg-8 col-xl-9 mb-3">
            <fz-card [paddingBody]="false">
                <div #chatArea class="chat-area">
                    <!-- title-->
                    <div class="chat-title">
                        <div [content]="popover" [interactive]="true" class="d-flex align-items-center cursor-pointer"
                             fzTip theme="light">
                            <div class="chat-title-img">
                                <fz-user-image [widthHeight]="30" src="assets/images/{{ chat.img }}" state="available">
                                </fz-user-image>
                            </div>
                            <div class="chat-title-name">{{ chat.name }}</div>
                        </div>

                        <div #popover class="d-flex align-items-center py-2 px-2">
                            <img [circle]="true" [crop]="true" [shadow]="true" [widthHeight]="60" class="mr-3"
                                 fzImageUtilities
                                 src="assets/images/{{ chat.img }}.jpg"/>
                            <div class="d-flex flex-column">
                                <h6 class="mb-1">{{ chat.name }}</h6>
                                <p class="mb-2">{{ chat.profession }}</p>
                                <button color="primary" fzButton size="sm">
                                    Profile
                                </button>
                            </div>
                        </div>

                        <div class="chat-title-actions">
                            <button [circle]="true" class="mr-2" color="light" fzButton>
                                <i class="fas fa-phone-alt"></i>
                            </button>
                            <button [circle]="true" color="light" fzButton>
                                <i class="fas fa-video"></i>
                            </button>
                        </div>
                    </div>

                    <!-- texts -->
                    <fz-scrollbar>
                        <div [ngStyle]="{'height.px': calcHeightTxtChat(chatArea)}" class="chat-txt">
                            <div class="chat-txt-area">
                                <div class="chat-txt-img">
                                    <img [circle]="true" [widthHeight]="30" fzImageUtilities
                                         src="assets/images/{{ chat.img }}.jpg"/>
                                </div>
                                <div class="chat-txt-txt">
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        Hello all well?
                                    </div>
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        How is the quarantine going
                                    </div>
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        ?
                                    </div>
                                </div>
                            </div>

                            <div class="chat-txt-area right">
                                <div class="chat-txt-txt right">
                                    <div class="chat-txt-int chat-txt-int-me" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        Hello all well.
                                    </div>
                                    <div class="chat-txt-int chat-txt-int-me" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        taking the time to study now
                                    </div>
                                </div>
                            </div>

                            <div class="chat-txt-area">
                                <div class="chat-txt-img">
                                    <img [circle]="true" [widthHeight]="30" fzImageUtilities
                                         src="assets/images/{{ chat.img }}.jpg"/>
                                </div>
                                <div class="chat-txt-txt">
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        wow good
                                    </div>
                                </div>
                            </div>

                            <div class="chat-txt-area right">
                                <div class="chat-txt-txt right">
                                    <div class="chat-txt-int chat-txt-int-me" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        Yes Yes
                                    </div>
                                </div>
                            </div>

                            <div class="chat-txt-area">
                                <div class="chat-txt-img">
                                    <img [circle]="true" [widthHeight]="30" fzImageUtilities
                                         src="assets/images/{{ chat.img }}.jpg"/>
                                </div>
                                <div class="chat-txt-txt">
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        Soon all this will be over
                                    </div>
                                </div>
                            </div>

                            <div class="chat-txt-area right">
                                <div class="chat-txt-txt right">
                                    <div class="chat-txt-int chat-txt-int-me" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        by God's will
                                    </div>
                                    <div class="chat-txt-int chat-txt-int-me" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        🙌
                                    </div>
                                </div>
                            </div>

                            <div class="chat-txt-area">
                                <div class="chat-txt-img">
                                    <img [circle]="true" [widthHeight]="30" fzImageUtilities
                                         src="assets/images/{{ chat.img }}.jpg"/>
                                </div>
                                <div class="chat-txt-txt">
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        Nice talking to you
                                    </div>
                                    <div class="chat-txt-int chat-txt-int-visit" content="02/05/2020 - 14:14" fzTip
                                         placement="auto">
                                        good studies!!
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="chatMessage" class="chat-txt-area right">
                                <div class="chat-txt-txt right">
                                    <div [content]="item.date" *ngFor="let item of chatMessage"
                                         class="chat-txt-int chat-txt-int-me" fzTip
                                         placement="auto">
                                        {{ item.message }}
                                    </div>
                                </div>
                            </div>

                            <div id="chat-txt-bottom"></div>
                        </div>
                    </fz-scrollbar>

                    <!-- area send -->
                    <div class="chat-area-send">
                        <input (keyup.enter)="newMessage()" [(ngModel)]="message" [focusState]="messageFocus"
                               (onFocus)="messageFocus = $event" class="form-control chat-send-form" fzFocus
                               placeholder="Type a message here" type="text"/>
                        <div class="ml-2 mr-2">
                            <button [circle]="true" color="light" content="Attach files" fzButton fzTip>
                                <i class="fas fa-paperclip"></i>
                            </button>
                        </div>
                        <div>
                            <button (click)="newMessage()" [circle]="true" color="primary" fzButton>
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </fz-card>
        </div>
        <!-- / chat -->
    </div>
</div>
