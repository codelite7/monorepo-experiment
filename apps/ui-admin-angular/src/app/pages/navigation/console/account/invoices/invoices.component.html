<div class="content" *ngIf="invoices !== undefined">
    <!-- upcoming charges -->
    <h2 class="mb-2">Upcoming Charges</h2>
    <div class="mb-3" *ngIf="claims?.subscriptionStatus === 'cancelled'">
        <h3 class="text-muted">Your subscription has been cancelled, there are no upcoming charges.</h3>
    </div>
    <div class="row mt-2" *ngIf="claims?.subscriptionStatus === 'active'">
        <fz-card class="col-md-6 col-lg-3 col-xl-3 mb-4" [paddingBody]="false" background="teal">
            <div class="dash-card-1">
                <div class="dash-card-1-img">
                    <fz-icon-color-circle [size]="45" icon="fas fa-dollar-sign" color="teal"></fz-icon-color-circle>
                </div>
                <div class="dash-card-1-txt">
                    <div class="dest1">{{ formatTotal(upcomingInvoice?.total)}}</div>
                    <div class="dest2">Total</div>
                </div>
            </div>
        </fz-card>

        <fz-card class="col-md-6 col-lg-3 col-xl-3 mb-4" [paddingBody]="false" background="pink">
            <div class="dash-card-1">
                <div class="dash-card-1-img">
                    <fz-icon-color-circle [size]="45" icon="fas fa-power-off" color="pink"></fz-icon-color-circle>
                </div>
                <div class="dash-card-1-txt">
                    <div class="dest1">{{ formatTotal(upcomingTierItem?.amount) }}</div>
                    <div class="dest2">{{ upcomingTierItem?.description }}</div>
                </div>
            </div>
        </fz-card>

        <fz-card class="col-md-6 col-lg-3 col-xl-3 mb-4" [paddingBody]="false" background="primary">
            <div class="dash-card-1">
                <div class="dash-card-1-img">
                    <fz-icon-color-circle [size]="45" icon="fas fa-server" color="primary"></fz-icon-color-circle>
                </div>
                <div class="dash-card-1-txt">
                    <div class="dest1">{{ formatTotal(upcomingEgressItem?.amount) }}</div>
                    <div class="dest2">{{ upcomingEgressItem?.description }}</div>
                </div>
            </div>
        </fz-card>

        <fz-card class="col-md-6 col-lg-3 col-xl-3 mb-4" [paddingBody]="false" background="orange">
            <div class="dash-card-1">
                <div class="dash-card-1-img">
                    <fz-icon-color-circle [size]="45" icon=" fas fa-database" color="orange"></fz-icon-color-circle>
                </div>
                <div class="dash-card-1-txt">
                    <div class="dest1">{{ formatTotal(upcomingRetentionItem?.amount) }}</div>
                    <div class="dest2">{{ upcomingRetentionItem?.description }}</div>
                </div>
            </div>
        </fz-card>
    </div>

    <!-- invoice history table -->
    <h2>History</h2>
    <div class="row mt-2">
        <fz-panel-table class="doc-card-margin mt-4 col-md-12">

            <!-- header -->
            <ng-container desc>
                <i class="mr-2 fas fa-credit-card"></i> Invoice History
                <app-docslink class="ml-3" link="https://swarmio-labs.gitbook.io/platform-documentation/billing-1/billing"></app-docslink>
            </ng-container>

            <fz-table table>
                <tr header>
                    <th>Period Start</th>
                    <th>Period End</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th></th>
                </tr>
                <tr *ngFor="let invoice of invoices">
                    <td>{{ getDate(invoice.period_start) | date : 'mediumDate' }}</td>
                    <td>{{ getDate(invoice.period_end) | date : 'mediumDate' }}</td>
                    <td>{{ formatTotal(invoice.total) }}</td>
                    <td>{{ invoice.status }}</td>
                    <td>
                        <div class="d-flex justify-content-end">
                            <a fzTip content="Download invoice as PDF" href="{{invoice.pdf_link}}">
                                <fz-icon-color-circle color="danger" icon="fas fa-file-pdf"></fz-icon-color-circle>
                            </a>
                        </div>
                    </td>
                </tr>
            </fz-table>

            <div class="pl-3 pt-3" table *ngIf="invoices.length === 0">
                You don't have any past invoices
            </div>
            <!-- footer -->
            <ng-container tRows [ngPlural]="invoices.length">
                {{invoices.length}}
                <ng-template ngPluralCase="=1">Invoice</ng-template>
                <ng-template ngPluralCase="other">Invoices</ng-template>
            </ng-container>
        </fz-panel-table>
    </div>
</div>
