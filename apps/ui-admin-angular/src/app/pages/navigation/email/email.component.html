<div class="content">

    <fz-breadcrumb>
        <fz-breadcrumb-item>
            <a routerLink="/dashboard" href="javascript:void(0);">Home</a>
        </fz-breadcrumb-item>
        <fz-breadcrumb-item [active]="true">
            <strong>Email</strong>
        </fz-breadcrumb-item>
    </fz-breadcrumb>

    <div class="title-content justify-content-between">
        <div class="d-flex">
            <fz-icon-color-circle class="mr-2" color="primary" icon="fas fa-envelope"></fz-icon-color-circle>
            Email
        </div>
        <button fzButton="fzButton" fzTip="fzTip" content="New email" color="primary" (click)="newEmail()">
            <i class="fas fa-pen"></i>
        </button>
    </div>

    <fz-card>

        <!--- email card -->
        <div *ngIf="!details" class="mt-1 mb-3 d-flex justify-content-between">

            <div class="d-flex">
                <button class="mr-2" fzTip="fzTip" content="Inbox" trigger="click" fzButton="fzButton"
                        [color]="mainService.getDarkTheme() ? 'dark' : 'light'" [activeB]="pageArea == 1"
                        (click)="pageArea = 1">
                    <i class='fas fa-inbox'></i>
                    <span class="ml-2" *ngIf="mainService.widthWindow > 500">Inbox</span>
                </button>
                <button class="mr-2" fzTip="fzTip" content="Drafts" trigger="click" fzButton="fzButton"
                        [color]="mainService.getDarkTheme() ? 'dark' : 'light'" [activeB]="pageArea == 2"
                        (click)="pageArea = 2">
                    <i class='fas fa-mail-bulk'></i>
                    <span class="ml-2" *ngIf="mainService.widthWindow > 500">Drafts</span>
                </button>
                <button class="mr-2" fzTip="fzTip" content="Trash" trigger="click" fzButton="fzButton"
                        [color]="mainService.getDarkTheme() ? 'dark' : 'light'" [activeB]="pageArea == 3"
                        (click)="pageArea = 3">
                    <i class='fas fa-trash'></i>
                    <span class="ml-2" *ngIf="mainService.widthWindow > 500">Trash</span>
                </button>
            </div>

            <fz-pagination [rows]="1" [perPage]="4" [actionNumbers]="false" [textBtNextPrev]="false"></fz-pagination>
        </div>
        <!-- / email card -->

        <!-- inbox -->
        <ng-container *ngIf="!details">
            <div [ngClass]="{ 'read': item.read, 'email-table-dark': mainService.getDarkTheme() }"
                 class="email-table-tr" *ngFor="let item of emails">
                <div class="email-table-area">

                    <div (click)="detail(item)" class="email-table-area-text">
                        <div class="d-flex align-items-center">
                            <div class="email-contact-img" fzColor="fzColor"
                                 [backgroundTextColor]="item.color">{{ item.from[0] }}</div>
                        </div>
                        <div class="email-table-texts text-truncate">
                            <div>
                                <span [ngClass]="{ 'email-table-strong': !item.read }">
                                    <span class="email-table-name">{{ item.from }}</span> - {{ item.subject }}
                                </span>
                            </div>
                            <div class="email-table-message">{{ item.message }}</div>
                        </div>
                    </div>

                    <div class="email-table-actions">
                        <div [ngClass]="{ 'email-table-strong': !item.read }" class="email-table-date">
                            {{ item.date }}
                        </div>
                        <fz-dropdown>
                            <a class="email-table-icon-dot" href="javascript:void(0);" button="button">
                                <i class="fas fa-ellipsis-v"></i>
                            </a>
                            <a fzDropdownItem="fzDropdownItem" href="javascript:void(0);" *ngIf="item.read"
                               (click)="unread(item)">
                                <i class="m-right icon fas fa-envelope"></i> Mark as unread
                            </a>
                            <a fzDropdownItem="fzDropdownItem" href="javascript:void(0);" *ngIf="!item.read"
                               (click)="read(item)">
                                <i class="m-right icon fas fa-envelope-open"></i> Mark as read
                            </a>
                            <a fzDropdownItem="fzDropdownItem" href="javascript:void(0);" (click)="deleteEmail(item)">
                                <i class="m-right icon fas fa-trash"></i> Delete
                            </a>
                        </fz-dropdown>
                    </div>

                </div>
            </div>
        </ng-container>
        <!-- / inbox-->

        <!-- details -->
        <div [ngClass]="{ 'email-table-dark': mainService.getDarkTheme() }" *ngIf="details">

            <!-- header -->
            <div class="d-flex align-items-center">
                <div class="d-flex align-items-center">
                    <button fzButton="fzButton" [color]="mainService.getDarkTheme() ? 'dark' : 'light'" fzTip="fzTip"
                            content="Back inbox" (click)="details = null">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h5 class="ml-3 mr-2 mb-0">{{ details.from }}</h5>
                </div>

                <div class="ml-auto">
                    <fz-dropdown>
                        <a class="email-table-icon-dot" href="javascript:void(0);" button="button">
                            <i class="fas fa-ellipsis-v"></i>
                        </a>
                        <a fzDropdownItem="fzDropdownItem" href="javascript:void(0);" (click)="reply(details)">
                            <i class="m-right icon fas fa-reply"></i> Reply
                        </a>
                        <a fzDropdownItem="fzDropdownItem" href="javascript:void(0);" (click)="forward(details)">
                            <i class="m-right icon fas fa-reply-all"></i> Forward
                        </a>
                        <a fzDropdownItem="fzDropdownItem" href="javascript:void(0);" (click)="deleteEmail(details)">
                            <i class="m-right icon fas fa-trash"></i> Delete
                        </a>
                    </fz-dropdown>
                </div>
            </div>

            <hr>

            <!-- address -->
            <small class="mt-2 mb-2 d-flex flex-column">
                    <span class="d-flex">
                        <span class="email-address-width">From:
                        </span>
                        <strong>
                            <a href="javascript:void(0);" (click)="newEmail('support@fzthemes.site')">support@fzthemes.site</a>
                        </strong>
                    </span>
                <span class="d-flex">
                        <span class="email-address-width">To:
                        </span>
                        <strong>
                            <a href="javascript:void(0);" (click)="newEmail(details.email)">{{ details.email }}</a>
                        </strong>
                    </span>
                <span class="d-flex">
                        <span class="email-address-width">Date:
                        </span>
                        <strong>{{ details.date }}</strong>
                    </span>
            </small>

            <hr>

            <!-- texts -->
            <div class="d-flex flex-column">
                <h5 class="mb-3">{{ details.subject }}</h5>
                <div class="email-details-text" [innerHTML]="details.messageC"></div>
            </div>

        </div>
        <!-- /details -->

    </fz-card>

</div>
